import{_ as h,h as g,p}from"./hooks.module.ee390651.js";import{l as _,_ as m}from"./preact.module.e54f245b.js";const{replace:b}="",k=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34);/g,w={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"'},O=t=>w[t],y=t=>b.call(t,k,O);var C=0;function c(t,o,i,f,a,l){var s,e,r={};for(e in o)e=="ref"?s=o[e]:r[e]=o[e];var n={type:t,props:r,key:i,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--C,__source:a,__self:l};if(typeof t=="function"&&(s=t.defaultProps))for(e in s)r[e]===void 0&&(r[e]=s[e]);return _.vnode&&_.vnode(n),n}const q=({headings:t=[]})=>{const o=h(),i="on-this-page-heading",f=h([]),[a,l]=g("overview");p(()=>{const e=()=>{const r=document.querySelectorAll("article :is(h1, h2, h3, h4)");f.current=Array.from(r).map(n=>({id:n.id,topOffset:n.getBoundingClientRect().top+window.scrollY}))};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),p(()=>{if(!o.current)return;const e=u=>{for(const d of u)if(d.isIntersecting){const{id:v}=d.target;if(v===i)continue;l(d.target.id);break}},r={rootMargin:"-100px 0% -66%",threshold:1},n=new IntersectionObserver(e,r);return document.querySelectorAll("article :is(h1,h2,h3)").forEach(u=>n.observe(u)),()=>n.disconnect()},[o.current]);const s=e=>{l(e.target.getAttribute("href").replace("#",""))};return c(m,{children:[c("h2",{id:i,className:"heading",children:"On this page"}),c("ul",{ref:o,children:t.filter(({depth:e})=>e>1&&e<4).map(e=>c("li",{className:`header-link depth-${e.depth} ${a===e.slug?"current-header-link":""}`.trim(),children:c("a",{href:`#${e.slug}`,onClick:s,children:y(e.text)})}))})]})};export{q as default};
